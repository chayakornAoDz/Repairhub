/* Merged on 2025-08-27T14:35:02.404273 */
:root{
  --bg:#0f172a; /* slate-900 */
  --bg2:#111827; /* gray-900 */
  --card:#111827;
  --accent:#22d3ee; /* cyan-400 */
  --text:#e5e7eb;
  --muted:#9ca3af;
  --good:#10b981;
  --warn:#f59e0b;
  --bad:#ef4444;
}
*{box-sizing:border-box}
html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif}
a{color:var(--accent);text-decoration:none}
.container{max-width:1100px;margin:0 auto;padding:24px}
.card{background:linear-gradient(180deg,#0b132a, #0b132a00);border:1px solid #1f2937;border-radius:16px;padding:20px;box-shadow:0 10px 30px rgba(0,0,0,.35)}
input,select,textarea,button{width:100%;padding:12px 14px;margin-top:12px;border-radius:10px;border:1px solid #374151;background:#0b132a;color:var(--text)}
input:focus,select:focus,textarea:focus{outline:2px solid var(--accent);border-color:transparent}
label{display:block;margin:10px 0 6px;color:#cbd5e1}
.row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.row-3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px}
.row-4{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:12px}
@media(max-width:900px){.row,.row-3,.row-4{grid-template-columns:1fr}}
.btn{display:inline-flex;gap:8px;align-items:center;justify-content:center;border:1px solid #334155;background:#0b132a;padding:10px 14px;border-radius:12px;cursor:pointer;transition:transform .12s ease, background .2s}
.btn:hover{transform:translateY(-1px);background:#111827}
.btn-primary{background:linear-gradient(90deg,#0891b2,#06b6d4);border:none}
.badge{display:inline-block;padding:4px 10px;border-radius:999px;font-size:12px;border:1px solid #334155;color:#cbd5e1}
.badge.good{border-color:var(--good);color:var(--good)}
.badge.warn{border-color:var(--warn);color:var(--warn)}
.badge.bad{border-color:var(--bad);color:var(--bad)}

.shimmer{position:relative;overflow:hidden}
.shimmer::after{content:'';position:absolute;inset:0;background:linear-gradient(110deg,transparent 0,rgba(255,255,255,.08) 30%,transparent 60%);transform:translateX(-100%);animation:shine 1.8s infinite}
@keyframes shine{to{transform:translateX(100%)}}

.sidebar{position:sticky;top:0;height:100vh;padding:20px;border-right:1px solid #1f2937;background:#0b1222 }
.sidebar .logo{font-size:18px;font-weight:700;letter-spacing:.5px;margin-bottom:12px }
.menu a{display:flex;align-items:center;gap:10px;padding:10px 12px;border-radius:12px;color:#cbd5e1;border:1px solid transparent; margin-left: 5px;}
.menu a.active,.menu a:hover{border-color:#334155;background:#0f172a;height: 44px; width: auto;}

@media(max-width:1024px){ .sidebar{height:auto;position:static;margin-bottom:16px}}

.stat{display:flex;align-items:center;gap:12px;padding:16px;border:1px solid #1f2937;border-radius:14px;background:#0b1222}
.stat .num{font-size:26px;font-weight:700}
/* กล่องหลักของกราฟแท่ง (ความสูงรวมของกราฟ + การจัดเรียง) */
.bar {
  height: 220px;                /* กำหนดความสูงกราฟ */
  display: flex;                /* ใช้ flexbox จัด layout แนวนอน */
  gap: 10px;                    /* ระยะห่างระหว่างแท่ง/กลุ่ม */
  align-items: flex-end;        /* ให้แท่งชิดด้านล่าง (เหมือนกราฟจริง) */
  overflow-x: auto;             /* ถ้ากราฟยาวเกิน จะเลื่อนได้แนวนอน */
}

/* กล่องของแต่ละ “กลุ่มเดือน” */
.bar .group {
  display: flex;                /* ภายในก็ใช้ flex */
  align-items: flex-end;        /* ให้แท่งในกลุ่มชิดล่าง */
  height: 100%;                 /* สูงเต็มเท่ากับ .bar */
  border: 1px solid #1f2937;    /* เส้นขอบสีเทาเข้ม */
  border-radius: 8px;           /* มุมโค้งนิดหน่อย */
  background: #0b1222;          /* พื้นหลังเข้ม (ให้แท่งเด่น) */
}

/* ชั้นในของ group (ห่อ barItem หลาย ๆ อัน) */
.bar .group .group-inner {
  display: flex;                /* จัดเรียง barItem แนวนอน */
  align-items: flex-end;        /* ให้แต่ละแท่งชิดล่าง */
}

/* แท่งกราฟจริง ๆ */
.bar .group .barItem {
  border-radius: 6px 6px 0 0;   /* มุมบนโค้ง (สวยกว่าแท่งแข็ง ๆ) */
}
.table{width:100%;border-collapse:collapse}
.table th,.table td{border-bottom:1px solid #1f2937;padding:10px;text-align:left}
.table th{color:#93c5fd}
.table tr:hover td{background:#0b132a}

.print-only{display:none}
@media print{
  .no-print{display:none}
  .print-only{display:block}
  body{background:#fff;color:#000}
  .card{box-shadow:none;border:1px solid #ccc}
}
#recentFeed {
  height: 200px;       /* กำหนดความสูงตายตัว */
  overflow-y: auto;    /* ให้เลื่อนเฉพาะแกน Y */
  overflow-x: hidden;  /* กัน scrollbar แนวนอน */
  padding-right: 5px;  /* เว้นที่กันชน scrollbar */
}
  /* จัดเลย์เอาต์ฟอร์มกรองให้เป็น 4 คอลัมน์ */
  .filter-row{
    display:grid;
    grid-template-columns: 1.6fr 1fr 1.3fr 0.8fr;
    gap:12px;
    align-items:end;
  }
  /* กล่องประเภท + ปุ่มล้างค่า อยู่แถวเดียวกัน */
  .hstack{ display:flex; gap:8px; align-items:center; }
  .hstack select{ flex:1; }     /* ให้ select ขยายได้ */
  @media(max-width: 900px){
    .filter-row{ grid-template-columns:1fr; }
  }
/* ====== Requests page – layout & polish ====== */
.filter-row{
  display:grid;
  grid-template-columns: 1.2fr 0.8fr 1fr 0.5fr;
  gap:12px;
  align-items:end;
}
@media(max-width: 900px){
  .filter-row{ grid-template-columns: 1fr; }
}
.hstack{ display:flex; gap:8px; align-items:center; }

/* ปุ่มจาง ๆ สำหรับฟังก์ชันย่อย */
.btn-ghost{
  background:#0b132a;
  border:1px solid #283446;
}
.btn-ghost:hover{ background:#111b2c; }

/* ตารางกระชับ/hover */
.table.compact th, .table.compact td{ padding:10px 12px; }
.table-hover tbody tr:hover td{ background:#0b132a; }

/* ชิป/แบดจ์แสดงประเภท/สถานะ */
.chip{
  display:inline-block;
  padding:3px 8px;
  border:1px solid #334155;
  border-radius:999px;
  font-size:12px;
  color:#cbd5e1;
  background:#0b1222;
}
.badge.good{  border-color:#10b981; color:#10b981; }
.badge.warn{  border-color:#f59e0b; color:#f59e0b; }
.badge.bad{   border-color:#ef4444; color:#ef4444; }
.badge.muted{ border-color:#64748b; color:#94a3b8; }

/* เพจิเนชัน */
.pagination{
  display:flex;
  justify-content:flex-end;
  gap:8px;
  flex-wrap:wrap;
  margin-top:14px;
}
.page-btn{
  display:inline-flex; align-items:center; justify-content:center;
  padding:8px 12px; border-radius:10px;
  border:1px solid #334155; background:#0b132a; color:#e5e7eb;
  transition:all .15s ease;
}
.page-btn:hover{ background:#111827; transform:translateY(-1px); }
.page-btn.active{
  background:linear-gradient(90deg,#0891b2,#06b6d4);
  border-color:transparent; color:#0b1222; font-weight:700;
}
.page-btn.disabled{
  opacity:.45; pointer-events:none;
}

/* ตัวเลข ticket mono */
.mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; }

/* ข้อความรองเล็ก ๆ */
.small{ font-size:12px; }

/* ===================== Auth / Login ===================== */
.auth-body{
  min-height:100vh;
  background:
    radial-gradient(1200px 600px at 10% -10%, rgba(34,211,238,.12), transparent 50%),
    radial-gradient(900px 500px at 110% 20%, rgba(8,145,178,.14), transparent 55%),
    var(--bg);
}

.login-wrap{
  min-height:100vh;
  display:grid;
  place-items:center;
  padding:28px 18px;
}

.auth-card{
  width:100%;
  max-width:520px;
  position:relative;
  overflow:hidden;
  border-radius:18px;
  border:1px solid #1f2937;
  background:linear-gradient(180deg,#0b132a, #0b132a00);
  box-shadow:0 18px 60px rgba(0,0,0,.45);
}
.auth-card::before{
  content:"";
  position:absolute; inset:-1px;
  border-radius:20px;
  padding:1px;
  background:linear-gradient(120deg, rgba(34,211,238,.6), rgba(8,145,178,.0) 35%, rgba(6,182,212,.5));
  -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite: xor; mask-composite: exclude;
  pointer-events:none;
}

/* Brand header */
.brand{display:flex; align-items:center; gap:12px; margin-bottom:6px}
.brand-icon{
  width:48px; height:48px; border-radius:14px;
  display:grid; place-items:center; font-size:22px;
  background:linear-gradient(180deg,#0ea5b5,#06b6d4);
  box-shadow:0 10px 20px rgba(6,182,212,.25);
}
.brand-title{font-weight:800; letter-spacing:.3px; font-size:18px}
.brand-lite{color:#06b6d4}
.brand-sub{color:#9ca3af; font-size:12px; margin-top:-2px}

.auth-title{margin:6px 0 14px 0; font-size:22px; font-weight:700}

/* Inputs with icons */
.input-wrap{position:relative}
.input-wrap input{
  width:100%;
  padding-left:42px;
}
.input-ico{
  position:absolute; left:12px; top:50%; transform:translateY(-50%);
  opacity:.7; font-size:14px; user-select:none;
}

/* Button */
.auth-submit{margin-top:14px; width:100%; padding:12px 14px; font-weight:700}

/* Foot */
.auth-foot{
  display:flex; justify-content:space-between; align-items:center;
  margin-top:14px; gap:8px; flex-wrap:wrap;
}
.link-muted{color:#9ca3af}
.link-muted:hover{color:#cbd5e1}

/* Alert box */
.alert{
  padding:10px 12px; border-radius:12px;
  border:1px solid #334155; background:#0b1222; color:#e5e7eb;
  margin:8px 0 10px 0; font-size:14px;
}
.alert.bad{ border-color:var(--bad); color:var(--bad) }

/* Small polish on form elements for auth page */
.auth-card label{ color:#cbd5e1; margin:10px 0 6px; display:block }

/* Users */
.action-buttons {
  display: flex;
  gap: 6px; /* ระยะห่างระหว่างปุ่ม */
  justify-content: flex-end;
}

.btn-sm {
  padding: 6px 0;
  width: 70px;       /* ทำให้ปุ่มกว้างเท่ากัน */
  font-size: 13px;
  text-align: center;
  border-radius: 8px;
  cursor: pointer;
}

.btn-edit {
  background: #1d4ed8;
  border: 1px solid #1e40af;
  color: #fff;
}
.btn-edit:hover { background: #1e40af; }

.btn-danger {
  background: #dc2626;
  border: 1px solid #b91c1c;
  color: #fff;
}
.btn-danger:hover { background: #b91c1c; }

/* ---------- INDEX HERO ---------- */
.hero{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:16px;
  padding:24px 20px;
}

.hero-title{
  margin:0 0 6px;
}

.hero-sub{
  margin:0;
  color:var(--muted);
}

.hero-left{
  flex:1 1 auto;
  min-width:0;
}

/* กล่องโลโก้ด้านขวา โค้งตามการ์ด + overflow: hidden ให้รูปตัดมุมโค้ง */
.brand-box{
  flex:0 0 380px;
  height:120px;
  border:1px solid #1f2937;
  border-radius:16px;             /* ต้องมีเพื่อให้รูปโค้งตาม */
  overflow:hidden;                /* สำคัญ: ตัดรูปให้ตามโค้ง */
  background:linear-gradient(120deg, #0b132a, #0b132a00);
  box-shadow:inset 0 0 0 1px rgba(255,255,255,0.02);
  display:flex;
  align-items:center;
  justify-content:center;
}

/* รูปจะไม่เบี้ยวและครอบเต็มกรอบ */
.brand-img{
  width:100%;
  height:100%;
  object-fit:cover;               /* ครอบพอดีกรอบ */
  display:block;
}

/* Responsive: จอเล็กให้สลับซ้อนกัน */
@media(max-width:900px){
  .hero{flex-direction:column; align-items:stretch;}
  .brand-box{flex:0 0 auto; width:100%; height:140px;}
}

/* ========== Reports page ========== */

/* แถบกรองรายงาน (responsive) */
.report-toolbar{
  display:grid;
  grid-template-columns:repeat(4,minmax(0,1fr));
  gap:12px;
  align-items:end;
}
@media (max-width: 1000px){
  .report-toolbar{ grid-template-columns:1fr 1fr; }
}
@media (max-width: 560px){
  .report-toolbar{ grid-template-columns:1fr; }
}

/* หัวรายงาน + ปุ่ม export */
.report-header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  margin-bottom: 10px;
}
.report-actions{ display:flex; gap:8px; }

/* ครอบตารางให้เลื่อนในแกน X ได้หากคอลัมน์มาก */
.table-wrap{ overflow:auto; }

/* หัวตารางลอย (อ่านง่ายเวลาสกรอลล์ยาว) */
.table.sticky thead th{
  position: sticky;
  top: 0;
  background: #0b1222; /* เข้ากับธีมเดิม */
  z-index: 2;
}

/* แถวสลับสี */
.table.zebra tbody tr:nth-child(even) td{
  background: rgba(255,255,255,.02);
}

/* สี badge ตามสถานะ/ความสำคัญ */
.badge.status-ใหม่{            border-color:#22d3ee; color:#22d3ee; }
.badge.status-กำลังดำเนินการ{ border-color:#f59e0b; color:#f59e0b; }
.badge.status-รออะไหล่{       border-color:#8b5cf6; color:#8b5cf6; }
.badge.status-เสร็จสิ้น{      border-color:#10b981; color:#10b981; }
.badge.status-ยกเลิก{         border-color:#ef4444; color:#ef4444; }

.badge.prio-ปกติ{   border-color:#94a3b8; color:#94a3b8; }
.badge.prio-เร่งด่วน{ border-color:#f59e0b; color:#f59e0b; }
.badge.prio-วิกฤต{   border-color:#ef4444; color:#ef4444; }

/* พิมพ์รายงานสวย ๆ */
@media print{
  .no-print{ display:none !important; }
  .card{ box-shadow:none; border:1px solid #ddd; }
  body{ background:#fff; color:#000; }
  .table th, .table td{ padding:6px; border-color:#ccc; }
}

/* ทำให้ icon ปฏิทินเป็นสีขาว */
input[type="date"]::-webkit-calendar-picker-indicator,
input[type="month"]::-webkit-calendar-picker-indicator {
  filter: invert(1);        /* กลายเป็นสีขาว */
  cursor: pointer;
}



/* Inventory */

/* ===== INVENTORY (scoped) ===== */

.inv-page { --border:#1f2937; --bg:#0b1222; --panel:#0b132a; --txt:#e5e7eb; --muted:#9ca3af;
            --primary1:#0891b2; --primary2:#06b6d4; --danger:#ef4444; --good:#10b981;
}

.inv-page * { box-sizing: border-box; }
.inv-page { color: var(--txt); }
.inv-page .inv-title{ margin:0 0 12px; }
.inv-page .inv-head{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; }

.inv-badge{ display:inline-block; padding:6px 10px; border:1px solid #334155; border-radius:999px; font-size:12px; color:#cbd5e1; }
.inv-good{ border-color: var(--good); color: var(--good); }
.inv-bad{  border-color: var(--danger); color: var(--danger); }
.inv-muted{ color: var(--muted); text-align:center; padding:12px 0; }

.inv-row{ display:grid; grid-template-columns: 1fr 1fr; gap:16px; }
@media (max-width: 980px){ .inv-row{ grid-template-columns: 1fr; } }

.inv-card{
  background: linear-gradient(180deg,#0b132a, #0b132a00);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 16px;
  box-shadow: 0 10px 30px rgba(0,0,0,.35);
}
.inv-card-title{ margin:2px 0 12px; }

.inv-input, .inv-btn, .inv-table select{
  width:100%; padding:11px 12px; border-radius:12px; border:1px solid #374151;
  background:#0b132a; color:#e5e7eb;
}
.inv-input:focus{ outline:2px solid var(--primary2); border-color:transparent; }

.inv-grid-2{ display:grid; grid-template-columns:1fr 1fr; gap:12px; }
.inv-grid-3{ display:grid; grid-template-columns:1fr 1fr 1fr; gap:12px; }
@media (max-width: 900px){
  .inv-grid-2, .inv-grid-3 { grid-template-columns:1fr; }
}

.inv-btn{
  display:inline-flex; align-items:center; justify-content:center; gap:8px;
  border:1px solid #334155; background:#22d3ee; cursor:pointer; margin-top:10px;
  transition:transform .12s ease, background .2s; text-decoration:none; color:#e5e7eb;
}
.inv-btn:hover{ transform:translateY(-1px); background:#111827; }
.inv-primary{ background: linear-gradient(90deg,var(--primary1),var(--primary2)); border-color:transparent; }
.inv-danger{ background:#991b1b; border-color:#7f1d1d; }
.inv-sm{ padding:7px 10px; border-radius:10px; }
.inv-right{ text-align:right; }

.inv-list-head{ display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:10px; }
.inv-actions{ display:flex; gap:8px; align-items:end; }

.inv-table-wrap{ overflow:auto; }
.inv-table{ width:100%; border-collapse:collapse; }
.inv-table th, .inv-table td{ padding:10px; border-bottom:1px solid var(--border); text-align:left; }
.inv-table th{ color:#93c5fd; }
.inv-table tbody tr:hover td{ background:#0b132a; }
.inv-cat-row td{ color:#93c5fd; border-bottom:1px dashed var(--border); font-weight:600; background:#0b1222; }

.inv-edit-row .inv-edit-form{ margin-top:8px; }
.inv-edit-actions{ display:flex; justify-content:flex-end; gap:8px; margin-top:10px; }

/* pages */
.inv-pages{ display:flex; justify-content:center; gap:8px; margin-top:12px; flex-wrap:wrap; }
.inv-page-btn{
  display:inline-flex; align-items:center; justify-content:center;
  padding:8px 12px; border-radius:10px; border:1px solid #334155; background:#0b132a; color:#e5e7eb;
}
.inv-page-btn:hover{ background:#111827; transform:translateY(-1px); }
.inv-disabled{ opacity:.45; pointer-events:none; }

/* recent movements block */
.inv-recent{ margin-top:12px; }
.inv-recent-head{ font-weight:700; margin-bottom:6px; }
.inv-recent-list{ list-style:none; padding:0; margin:0; display:flex; flex-direction:column; gap:8px; }
.inv-recent-line{ display:flex; gap:8px; align-items:center; }
.inv-recent-item{ flex:1 1 auto; min-width:0; }
.inv-recent-sub{ color:#9ca3af; font-size:12px; }
.inv-chip{ display:inline-block; padding:2px 8px; border:1px solid #334155; border-radius:999px; font-size:12px; background:#0b1222; }
.inv-type-in, .inv-type-return{ border-color: var(--good); color: var(--good); }
.inv-type-out, .inv-type-issue{ border-color: #f59e0b; color:#f59e0b; }
.inv-type-adjust{ border-color: #8b5cf6; color:#8b5cf6; }
.inv-qty{ color:#cbd5e1; }

/* label */
.inv-card label{ display:block; margin:8px 0 6px; color:#cbd5e1; }

/* เมนูย่อย: ซ่อนปกติ */
.menu .has-sub .sub{
  display:none;
  padding:6px 0 8px 10px;
  margin-top:6px;
  border-left:2px solid #243041;
}
.menu .has-sub .sub a{
  display:block;
  padding:8px 10px;
  border:1px solid transparent;
  border-radius:10px;
  color:#cbd5e1;
  font-size:14px;
}
.menu .has-sub .sub a:hover{
  background:#0f172a;
  border-color:#334155;
}

/* โชว์เมื่อ hover (เดสก์ท็อป) */
.menu .has-sub:hover .sub{ display:block; }

/* เปิดด้วยคลิก (มือถือ/จอ touch) */
.menu .has-sub.open .sub{ display:block; }

/* กันหัวบังตอนกระโดด #anchor */
.anchor{ scroll-margin-top: 16px; }

/* กล่องแถบปุ่มหมวดหมู่ */
.cat-bar, .cat-pills {
  display: flex;
  gap: 8px;
  margin-top: 8px;
}
.cat-pills {
  display: flex; gap: 6px; margin: 12px 0;
}
.cat-pill {
  display: inline-flex; align-items: center; justify-content: center;
  padding: 6px 14px; border-radius: 999px;
  border: 1px solid #334155; background: #1e293b; color: #e5e7eb; font-size: 14px;
  cursor: pointer; transition: all 0.2s ease-in-out; white-space: nowrap;
}
.cat-pill:hover { background: #0f172a; }
.cat-pill.active { background: #06b6d4; border-color: #06b6d4; color: #fff; font-weight: 600; }
.cat-pill .count {
  margin-left: 6px; background: rgba(255, 255, 255, 0.15); padding: 2px 6px; border-radius: 12px; font-size: 12px;
}

/* === Inventory quick fix: horizontal category pills + keep buttons inside card === */
.inv-page .cat-pills{
  display:flex; gap:8px; flex-wrap:wrap; overflow-x:auto; padding:6px 2px;
  -webkit-overflow-scrolling:touch; scrollbar-width: thin;
}
.inv-page .cat-pills::-webkit-scrollbar{height:8px}
.inv-page .cat-pills::-webkit-scrollbar-thumb{background:#253047;border-radius:8px}
.inv-page .cat-pills .cat-pill{ width:auto !important; }
.inv-page .cat-pill{
  display:inline-flex; align-items:center; justify-content:center;
  padding:6px 14px; border-radius:999px; border:1px solid #334155;
  background:#1e293b; color:#e5e7eb; font-size:14px; line-height:1;
  white-space:nowrap; cursor:pointer; transition:all .15s ease;
}
.inv-page .cat-pill:hover{ background:#0f172a; }
.inv-page .cat-pill.active{ background:#06b6d4; border-color:#06b6d4; color:#fff; font-weight:600; }
.inv-page .cat-pill .count{ margin-left:6px; background:rgba(255,255,255,.15); padding:2px 6px; border-radius:12px; font-size:12px; }
.inv-page .inv-card{ overflow:hidden; }
.inv-page .inv-actions, .inv-page .inv-list-head{ flex-wrap:wrap; }
.inv-page .inv-table-wrap{ overflow:auto; }
@media (max-width:900px){
  .inv-page .cat-pills{ flex-wrap:nowrap; }
  .inv-page .cat-pill{ font-size:13px; padding:6px 12px; }
}
@media (max-width:560px){
  .inv-page .cat-pill{ font-size:12px; padding:5px 10px; }
}


/* ===== Sidebar Hover-to-Open (no JS) ===== */
:root{ --sidebar-collapsed:64px; --sidebar-expanded:260px; }

.grid{
  display:grid;
  grid-template-columns: var(--sidebar-collapsed) 1fr;
  transition: grid-template-columns .22s ease;
}
.sidebar{
  position:sticky; top:0; height:100vh; padding:20px;
  border-right:1px solid #1f2937; background:#0b1222;
  width: var(--sidebar-collapsed);
  transition: width .22s ease, padding .22s ease;
  overflow: visible; /* allow flyouts */
}
/* Expand layout when hovering sidebar */
.grid:has(.sidebar:hover){
  grid-template-columns: var(--sidebar-expanded) 1fr;
}
.grid:has(.sidebar:hover) .sidebar{
  width: var(--sidebar-expanded);
}
@media(max-width:1024px){
  .grid{ grid-template-columns:1fr; }
  .sidebar{ width:auto; height:auto; position:static; margin-bottom:16px; }
}


/* ===== Submenu: hover/open ===== */
.menu .menu-item{ position: relative; }
.menu .has-sub > a{
  display:flex; align-items:center; justify-content:space-between; gap:10px;
}
.menu .has-sub > a::after{
  content:"▾"; font-size:12px; opacity:.7; margin-left:8px; transition: transform .15s ease;
}
.menu .sub{
  display:none;
  padding:6px 0 8px 10px;
  margin-top:6px;
  border-left:2px solid #243041;
}
.menu .sub a{
  display:block;
  padding:8px 10px;
  border:1px solid transparent;
  border-radius:10px;
  color:#cbd5e1;
  font-size:14px;
}
.menu .sub a:hover{ background:#0f172a; border-color:#334155; }
/* Desktop hover */
@media (hover:hover) and (pointer:fine){
  .menu .has-sub:hover > .sub{ display:block; }
  .menu .has-sub:hover > a::after{ transform: rotate(180deg); }
}
/* Touch toggle */
.menu .has-sub.open > .sub{ display:block; }

<!-- ===== Hover-to-open Sidebar (pure CSS) ===== -->

  :root{ --sidebar-collapsed:64px; --sidebar-expanded:260px; }

  /* ยุบค่าเริ่ม → ขยายเมื่อ hover (ใช้ :has) */
  .grid{
    grid-template-columns: var(--sidebar-collapsed) 1fr !important;
    transition: grid-template-columns .22s ease;
  }
  .sidebar{
    width: var(--sidebar-collapsed) !important;
    transition: width .22s ease, padding .22s ease;
    overflow: visible !important;  /* กัน flyout submenu โดนตัด */
  }
  .grid:has(.sidebar:hover){
    grid-template-columns: var(--sidebar-expanded) 1fr !important;
  }
  .grid:has(.sidebar:hover) .sidebar{
    width: var(--sidebar-expanded) !important;
  }

  /* ตอนยุบให้ซ่อน “ข้อความ” ทั้งหมดที่ติด .collapse-hide (เหลือแต่ icon) */
  .collapse-hide{ transition: opacity .15s ease, width .15s ease, margin .15s ease; }
  .grid:not(:has(.sidebar:hover)) .collapse-hide{
    opacity:0; width:0; margin:0 !important; pointer-events:none;
  }

  /* เมนูย่อย: เดสก์ท็อป hover โชว์, ตอนยุบเป็น flyout ข้าง ๆ */
  .menu .sub{ display:none; }
  @media (hover:hover) and (pointer:fine){
    .menu .has-sub:hover > .sub{ display:block; }
    .menu .has-sub > a::after{
      content:"▾"; font-size:12px; opacity:.7; margin-left:8px; transition:transform .15s ease;
    }
    .menu .has-sub:hover > a::after{ transform:rotate(180deg); }
  }
  .grid:not(:has(.sidebar:hover)) .menu .sub{ display:none; border-left:none; }
  .grid:not(:has(.sidebar:hover)) .menu .has-sub{ position:relative; }
  .grid:not(:has(.sidebar:hover)) .menu .has-sub:hover > .sub{
    display:block; position:absolute; left:calc(100% + 8px); top:0; min-width:220px;
    padding:6px; margin:0; background:#0b1222; border:1px solid #1f2937; border-radius:12px;
    box-shadow:0 10px 30px rgba(0,0,0,.35); z-index:100;
  }

  /* มือถือ: hover ใช้ไม่ได้ → ขยายตลอด และอนุญาต .open เพื่อโชว์เมนูย่อยด้วยการแตะ */
@media (max-width:1024px){
  .grid{ grid-template-columns:1fr !important; }
  .sidebar{ width:auto !important; overflow:visible !important; }
  .menu .has-sub.open > .sub{ display:block; }
}
  /* ซ่อน caret (▾) และจัดปุ่มให้ชิดกลาง เมื่อ Sidebar ยุบ */
.grid:not(:has(.sidebar:hover)) .menu .has-sub > a::after{
  display:none !important;   /* ไม่แสดงลูกศรตอนยุบ */
  content:"";
}
/* ตอนยุบ: ให้ลิงก์มีแค่ไอคอน → จัดกลาง */
.grid:not(:has(.sidebar:hover)) .menu .has-sub > a,
.grid:not(:has(.sidebar:hover)) .menu > a{
  justify-content:center !important;
}
<!-- Mobile/Tablet Drawer -->
.nav-trigger{
    display:none;
  }
  @media (max-width:1024px){
    .nav-trigger{
      position:fixed; left:12px; top:12px; z-index:110;
      display:inline-flex; align-items:center; justify-content:center;
      width:38px; height:38px; border-radius:10px;
      border:1px solid #334155; background:#0b132a; color:#e5e7eb;
      box-shadow:0 6px 18px rgba(0,0,0,.25);
    }
    .nav-trigger:active{ transform:translateY(1px); }
  }

  /* ฉากดำคลุมเวลาลิ้นชักเปิด */
  .nav-overlay{
    display:none;
  }
  @media (max-width:1024px){
    .nav-overlay{
      position:fixed; inset:0; background:rgba(0,0,0,.4);
      opacity:0; pointer-events:none; transition:opacity .2s ease; z-index:90;
      display:block;
    }
    body.nav-open .nav-overlay{ opacity:1; pointer-events:auto; }
  }

  /* Drawer: ใช้ sidebar เดิม แต่เปลี่ยนเป็น off-canvas บนจอ <= 1024px */
  @media (max-width:1024px){
    .grid{ grid-template-columns: 1fr !important; }
    .sidebar{
      position:fixed; top:0; left:0; bottom:0;
      width:260px; max-width:86%;
      transform:translateX(-100%); transition:transform .25s ease;
      z-index:100; overflow:auto; /* ให้เมนูเลื่อนได้ */
    }
    body.nav-open .sidebar{ transform:translateX(0); }

    /* ตอนเป็น drawer ให้ข้อความเมนู/ชื่อผู้ใช้มองเห็นปกติ */
    .collapse-hide{ opacity:1 !important; width:auto !important; margin:initial !important; pointer-events:auto !important; }

    /* เมนูย่อย: แตะเพื่อเปิด (ใช้ .open) */
    .menu .has-sub .sub{ display:none; }
    .menu .has-sub.open .sub{ display:block; }

    /* ซ่อน caret ตอนเป็นไอคอนล้วน “ไม่ได้ใช้” แล้ว ใน drawer ให้ทิ้งได้หรือคงไว้ก็ได้ */
    .menu .has-sub > a::after{ content:"▾"; font-size:12px; opacity:.7; margin-left:8px; }
  }

  /* Desktop ( >1024px ) ใช้โหมด hover ของคุณตามเดิม */
  @media (min-width:1025px){
    /* ซ่อน caret ตอน sidebar ยุบ (ไอคอนล้วน) */
    .grid:not(:has(.sidebar:hover)) .menu .has-sub > a::after{ display:none !important; content:""; }
    .grid:not(:has(.sidebar:hover)) .menu a{ justify-content:center !important; }
  }
/* ===== Mobile/Tablet Drawer - FINAL (<=1024px) ===== */

/* ซ่อนปุ่มบน Desktop เสมอ */
.nav-trigger, .nav-overlay { display:none !important; }

/* Drawer เฉพาะจอเล็ก */
@media (max-width:1024px){
  /* ปุ่ม ☰ */
  .nav-trigger{
    position:fixed; left:12px; top:12px; z-index:110;
    display:inline-flex !important; align-items:center; justify-content:center;
    width:38px; height:38px; border-radius:10px;
    border:1px solid #334155; background:#0b132a; color:#e5e7eb;
    box-shadow:0 6px 18px rgba(0,0,0,.25);
  }

  /* ฉากดำคลุม */
  .nav-overlay{
    position:fixed; inset:0; z-index:100; display:block !important;
    background:rgba(0,0,0,.4);
    opacity:0; pointer-events:none; transition:opacity .2s ease;
  }
  body.nav-open .nav-overlay{ opacity:1; pointer-events:auto; }

  /* ปิดโหมด hover/collapse เดสก์ท็อปบนมือถือ */
  .grid{ grid-template-columns:1fr !important; }
  .grid:has(.sidebar:hover){ grid-template-columns:1fr !important; }

  /* ใช้ sidebar เดิมเป็น off-canvas drawer */
  .sidebar{
    position:fixed !important; top:0; left:0; bottom:0; z-index:120 !important;
    width:260px; max-width:86%;
    height:auto !important; padding:20px !important; overflow:auto !important;
    transform:translateX(-100%) !important; transition:transform .25s ease;
  }
  body.nav-open .sidebar{ transform:translateX(0) !important; }

  /* ในโหมด drawer ให้ข้อความที่ติด .collapse-hide โชว์ปกติ */
  .collapse-hide{
    opacity:1 !important; width:auto !important; margin:initial !important; pointer-events:auto !important;
  }

  /* เมนูย่อย: แตะเพื่อเปิด (.open) */
  .menu .has-sub .sub{ display:none; }
  .menu .has-sub.open .sub{ display:block; }
}

/* Desktop (>1024px): ซ่อนปุ่ม และคงพฤติกรรม hover-collapsed เดิม */
@media (min-width:1025px){
  .nav-trigger, .nav-overlay{ display:none !important; }
  .grid:not(:has(.sidebar:hover)) .menu .has-sub > a::after{ display:none !important; content:""; }
  .grid:not(:has(.sidebar:hover)) .menu > a,
  .grid:not(:has(.sidebar:hover)) .menu .has-sub > a{ justify-content:center !important; }
}

/* เปิด/ปิด scroll ขณะ drawer เปิด */
body.nav-open{ overflow:hidden; }

/* ===== Drawer for <=1024px (FINAL) ===== */
/* ซ่อนปุ่มบน Desktop เสมอ */
.nav-trigger, .nav-overlay{ display:none !important; }

@media (max-width:1024px){
  .nav-trigger{
    position:fixed; left:12px; top:12px; z-index:110;
    display:inline-flex !important; align-items:center; justify-content:center;
    width:38px; height:38px; border-radius:10px;
    border:1px solid #334155; background:#0b132a; color:#e5e7eb;
    box-shadow:0 6px 18px rgba(0,0,0,.25);
  }
  .nav-overlay{
    position:fixed; inset:0; z-index:100; display:block !important;
    background:rgba(0,0,0,.4); opacity:0; pointer-events:none; transition:opacity .2s ease;
  }
  body.nav-open .nav-overlay{ opacity:1; pointer-events:auto; }

  /* ปิดโหมด hover บนมือถือ */
  .grid{ grid-template-columns:1fr !important; }
  .grid:has(.sidebar:hover){ grid-template-columns:1fr !important; }

  /* ใช้ sidebar เป็น off-canvas drawer */
  .sidebar{
    position:fixed !important; top:0; left:0; bottom:0; z-index:120 !important;
    width:260px; max-width:86%;
    transform:translateX(-100%) !important; transition:transform .25s ease;
    overflow:auto !important; height:auto !important; padding:20px !important;
  }
  body.nav-open .sidebar{ transform:translateX(0) !important; }

  /* ให้ข้อความโชว์ปกติเมื่อเป็น drawer */
  .collapse-hide{
    opacity:1 !important; width:auto !important; margin:initial !important; pointer-events:auto !important;
  }

  /* เมนูย่อย: แตะเพื่อเปิด */
  .menu .has-sub .sub{ display:none; }
  .menu .has-sub.open .sub{ display:block; }
}

/* Desktop (>1024px): ซ่อนปุ่ม และคงโหมด hover-collapsed เดิม */
@media (min-width:1025px){
  .nav-trigger, .nav-overlay{ display:none !important; }
  .grid:not(:has(.sidebar:hover)) .menu .has-sub > a::after{ display:none !important; content:""; }
  .grid:not(:has(.sidebar:hover)) .menu > a,
  .grid:not(:has(.sidebar:hover)) .menu .has-sub > a{ justify-content:center !important; }
}

/* ไม่ให้หน้าหลักเลื่อนเมื่อ drawer เปิด */
body.nav-open{ overflow:hidden; }

/* ===================== CCTV PAGES (scoped, non-conflicting) ===================== */
/* ทำให้ input/select/button บนแถบควบคุมไม่กินความกว้าง 100% ตามสไตล์หลัก */
.cctv-wrap .cctv-input,
.cctv-wrap .cctv-select,
.cctv-wrap .cctv-btn{
  width:auto; display:inline-flex; align-items:center;
}

/* ส่วนหัว/แถบควบคุม */
.cctv-wrap{ padding:20px; }
.cctv-header{ display:flex; justify-content:space-between; gap:12px; flex-wrap:wrap; align-items:flex-end; }
.cctv-title{ display:flex; gap:10px; align-items:center; }
.cctv-ctrl{ display:flex; gap:8px; flex-wrap:wrap; align-items:flex-end; }
.cctv-field{ display:flex; flex-direction:column; gap:4px; font-size:14px; color:var(--muted); }
.cctv-input,.cctv-select,.cctv-btn{
  background:#0b132a; color:var(--text);
  border:1px solid #334155; border-radius:10px; padding:8px 10px;
}
.cctv-btn{ cursor:pointer }
.cctv-btn.ghost{ background:transparent; border-style:dashed; }
.cctv-btn.outline{ background:transparent; }

/* กล่องตาราง */
.cctv-table-wrap{
  background:linear-gradient(180deg,#0b132a,#0b132a00);
  border:1px solid #1f2937; border-radius:12px; padding:6px; overflow:auto;
}

/* ตารางภายใน “พื้นขาว” */
.cctv-table{
  width:100%; border-collapse:separate; border-spacing:0;
  background:#fff; color:#0f172a; font-size:13px; min-width:860px;
}
.cctv-table th,.cctv-table td{
  border:1px solid rgba(15,23,42,.22); padding:4px 6px; white-space:nowrap;
}
/* เฮดเดอร์ติดบน */
.cctv-table thead th{
  position:sticky; top:0; z-index:2;
  background:#0b1222; color:var(--text); border-color:#1f2937;
}
/* คอลัมน์วันที่ติดซ้าย */
.cctv-table th:first-child,
.cctv-table td:first-child{
  position:sticky; left:0; z-index:3; text-align:left;
  background:#f8fafc; color:#0f172a; box-shadow:2px 0 0 rgba(15,23,42,.06);
}

/* กำหนดความกว้างคอลัมน์ให้เท่ากัน (โหมด equal) */
.cctv-table.cctv-eq{ table-layout:fixed; --cctv-date:110px; --cctv-stat:74px; --cctv-cam:64px; }
.cctv-table.cctv-eq th:first-child,
.cctv-table.cctv-eq td:first-child{ width:var(--cctv-date); }
.cctv-table.cctv-eq th:nth-last-child(3),
.cctv-table.cctv-eq td:nth-last-child(3),
.cctv-table.cctv-eq th:nth-last-child(2),
.cctv-table.cctv-eq td:nth-last-child(2),
.cctv-table.cctv-eq th:nth-last-child(1),
.cctv-table.cctv-eq td:nth-last-child(1){ width:var(--cctv-stat); }
.cctv-table.cctv-eq th:not(:first-child):not(:nth-last-child(-n+3)),
.cctv-table.cctv-eq td:not(:first-child):not(:nth-last-child(-n+3)){ width:var(--cctv-cam); }

/* เซลล์ + สีสถานะ */
.cctv-cell{ min-width:0; height:24px; }
.cctv-cell[data-val="/"]{ color:#16a34a; font-weight:700; }    /* / = ปกติ */
.cctv-cell[data-val="×"]{ color:#ef4444; font-weight:700; }    /* × = ผิดปกติ */
.cctv-ok { background:rgba(16,185,129,.14); color:#166534; }
.cctv-bad{ background:rgba(239,68,68,.14); color:#991b1b; }
.cctv-pct{ background:rgba(96,165,250,.16); color:#1d4ed8; }

/* ฟุตโน้ต/ผู้จัดทำ */
.cctv-note{ margin-top:10px; display:flex; gap:10px; flex-wrap:wrap; }
.cctv-note .cctv-input{ min-width:260px; }

/* ===================== PRINT: A4 Landscape + One-page Fit ===================== */
@media print{
  @page{ size:A4 landscape; margin:6mm; }
  .cctv-wrap .cctv-ctrl, .cctv-wrap .cctv-note{ display:none !important; }

  .cctv-table{
    width:100% !important; min-width:0 !important; table-layout:fixed;
    font-size:10px;
  }
  .cctv-table th, .cctv-table td{
    padding:2px 3px !important; border:.6px solid #000 !important; color:#000 !important;
  }
  .cctv-table thead th,
  .cctv-table th:first-child,
  .cctv-table td:first-child{
    position:static !important; background:#eee !important; color:#000 !important;
  }
  table, tr, td, th{ page-break-inside:avoid !important; }
}
/* — CCTV: จัดสัญลักษณ์ให้อยู่กึ่งกลาง โดยไม่ทำลาย table layout — */
.cctv-table th { text-align: center; }
.cctv-table td { 
  text-align: center; 
  vertical-align: middle;    /* กึ่งกลางแนวตั้งแบบ table แท้ ๆ */
}

/* คอลัมน์วันที่ให้ชิดซ้ายตามเดิม */
.cctv-table th:first-child,
.cctv-table td:first-child { text-align: left; }

/* ตัวเซลล์ของกล้อง: อย่าเปลี่ยน display */
.cctv-cell{
  /* ห้าม display:flex */
  height: 24px;
  padding: 0;
  line-height: 24px;          /* ช่วยให้สัญลักษณ์ตัวเดียวกลางเป๊ะ */
}

/* ถ้าเคยใส่กฎเก่าไปแล้วและยังแคชติดอยู่ บังคับคืนค่าได้แบบนี้ */
.cctv-table td.cctv-cell{ display: table-cell !important; }
.cctv-table tbody td:hover { background: rgba(2,132,199,.06); }
.cctv-cell { cursor: pointer; }

/* === Fix: แสดงขอบตอนโฟกัสให้ทุกช่อง รวมถึงที่เป็น :invalid === */
input:focus, select:focus, textarea:focus,
input:focus:invalid, select:focus:invalid, textarea:focus:invalid {
  outline: 2px solid var(--accent) !important;   /* วงสว่างสีธีม */
  border-color: transparent !important;          /* ไม่ให้ขอบเดิมมาซ้อน */
  box-shadow: 0 0 0 3px rgba(34,211,238,.25) !important; /* glow นุ่ม ๆ */
}

/* (ทางเลือก) สไตล์เมื่อ hover เพื่อ feedback เล็ก ๆ */
input:hover, select:hover, textarea:hover {
  border-color: #4b5563;
}

<style>
/* Alert base */
.alert{
  padding:12px 16px;
  border-radius:12px;
  font-size:15px;
  font-weight:600;
  border:1px solid transparent;
}

/* สำเร็จ */
.alert-success{
  color:#10b981;                         /* เขียว */
  background:rgba(16,185,129,.15);
  border-color:#1e5f49;
}

/* ล้มเหลว */
.alert-error{
  color:#ef4444;                         /* แดง */
  background:rgba(239,68,68,.15);
  border-color:#5f1e27;
}
</style>
